<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividades Adaptadas TEA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Andika&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Andika', sans-serif; /* Fuente altamente legible */
            background-color: #eef2f3;
            overflow-x: hidden;
        }
        .activity-zone {
            min-height: 400px;
        }
        .drop-zone {
            border: 4px dashed #cbd5e1;
            transition: all 0.3s ease;
        }
        .drop-zone.drag-over {
            background-color: #d1fae5;
            border-color: #10b981;
            transform: scale(1.02);
        }
        .token {
            width: 40px;
            height: 40px;
            background-color: #e2e8f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .token.active {
            background-color: #fbbf24;
            transform: rotate(360deg);
        }
        .draggable {
            cursor: grab;
            touch-action: none;
        }
        .draggable:active {
            cursor: grabbing;
        }
    </style>
</head>
<body class="p-4 md:p-8 select-none">

    <div class="max-w-4xl mx-auto">
        <!-- Header & Token Board -->
        <header class="flex flex-col md:flex-row justify-between items-center bg-white p-6 rounded-3xl shadow-sm mb-8 gap-6">
            <div class="text-center md:text-left">
                <h1 class="text-2xl font-bold text-slate-700">Mi Trabajo de Hoy</h1>
                <p class="text-slate-400 text-sm">Paso a paso, yo puedo.</p>
            </div>
            
            <!-- Token Economy System -->
            <div class="flex gap-2 bg-slate-50 p-3 rounded-full border border-slate-100">
                <div class="token" id="token-1">‚≠ê</div>
                <div class="token" id="token-2">‚≠ê</div>
                <div class="token" id="token-3">‚≠ê</div>
                <div class="token" id="token-4">‚≠ê</div>
                <div class="token" id="token-5">‚≠ê</div>
            </div>
        </header>

        <!-- Activity Navigation (Visual) -->
        <nav class="flex gap-4 mb-8 overflow-x-auto pb-2">
            <button onclick="loadActivity('sorting')" class="flex-none w-32 bg-white p-4 rounded-2xl shadow-sm border-b-4 border-blue-400 hover:bg-blue-50">
                <span class="text-3xl block mb-2">üçé</span>
                <span class="text-xs font-bold uppercase">Clasificar</span>
            </button>
            <button onclick="loadActivity('emotions')" class="flex-none w-32 bg-white p-4 rounded-2xl shadow-sm border-b-4 border-purple-400 hover:bg-purple-50">
                <span class="text-3xl block mb-2">üòä</span>
                <span class="text-xs font-bold uppercase">Emociones</span>
            </button>
            <button onclick="loadActivity('routines')" class="flex-none w-32 bg-white p-4 rounded-2xl shadow-sm border-b-4 border-orange-400 hover:bg-orange-50">
                <span class="text-3xl block mb-2">üïí</span>
                <span class="text-xs font-bold uppercase">Rutinas</span>
            </button>
        </nav>

        <!-- Main Activity Canvas -->
        <div id="activity-canvas" class="bg-white p-8 rounded-3xl shadow-xl min-h-[500px] flex flex-col items-center justify-center relative">
            <!-- Initial State -->
            <div id="start-screen" class="text-center">
                <div class="text-8xl mb-6">üé®</div>
                <h2 class="text-3xl font-bold text-slate-800 mb-4">¬°Hola! Vamos a aprender</h2>
                <p class="text-slate-500 mb-8">Elige una actividad arriba para comenzar.</p>
            </div>

            <!-- Content injected here -->
            <div id="activity-content" class="w-full hidden"></div>
        </div>

        <!-- Success Feedback (Hidden) -->
        <div id="success-modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm hidden flex items-center justify-center z-50 p-6">
            <div class="bg-white rounded-3xl p-10 text-center max-w-sm w-full shadow-2xl">
                <div class="text-7xl mb-6 animate-bounce">üéâ</div>
                <h2 class="text-3xl font-bold mb-2">¬°Excelente!</h2>
                <p class="text-slate-500 mb-8">Lo has hecho muy bien. ¬°Ganaste una estrella!</p>
                <button onclick="closeModal()" class="w-full py-4 bg-green-500 text-white rounded-2xl font-bold text-xl shadow-lg hover:bg-green-600 transition-all">Siguiente</button>
            </div>
        </div>
    </div>

    <script>
        let currentTokens = 0;

        function loadActivity(type) {
            document.getElementById('start-screen').classList.add('hidden');
            const content = document.getElementById('activity-content');
            content.classList.remove('hidden');
            content.innerHTML = '';

            if (type === 'sorting') {
                content.innerHTML = `
                    <h2 class="text-2xl font-bold text-center mb-8">Coloca la COMIDA en el plato</h2>
                    <div class="flex justify-around mb-12">
                        <div id="plato" class="drop-zone w-64 h-64 rounded-full flex items-center justify-center text-slate-300 font-bold" ondragover="allowDrop(event)" ondrop="drop(event, 'comida')">
                            PLATO
                        </div>
                    </div>
                    <div class="flex justify-center gap-6">
                        <div id="apple" draggable="true" ondragstart="drag(event)" data-type="comida" class="draggable text-6xl bg-red-50 p-4 rounded-2xl shadow-sm">üçé</div>
                        <div id="ball" draggable="true" ondragstart="drag(event)" data-type="objeto" class="draggable text-6xl bg-blue-50 p-4 rounded-2xl shadow-sm">‚öΩ</div>
                        <div id="pizza" draggable="true" ondragstart="drag(event)" data-type="comida" class="draggable text-6xl bg-yellow-50 p-4 rounded-2xl shadow-sm">üçï</div>
                    </div>
                `;
            } else if (type === 'emotions') {
                content.innerHTML = `
                    <h2 class="text-2xl font-bold text-center mb-8">¬øC√≥mo se siente el ni√±o?</h2>
                    <div class="flex justify-center mb-10">
                        <div class="text-9xl p-6 bg-yellow-100 rounded-full">üò¢</div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="checkEmotion(false)" class="p-6 bg-slate-50 rounded-2xl border-2 border-slate-100 text-xl font-bold hover:bg-red-50 hover:border-red-200">Feliz</button>
                        <button onclick="checkEmotion(true)" class="p-6 bg-slate-50 rounded-2xl border-2 border-slate-100 text-xl font-bold hover:bg-green-50 hover:border-green-200">Triste</button>
                    </div>
                `;
            } else if (type === 'routines') {
                content.innerHTML = `
                    <h2 class="text-2xl font-bold text-center mb-8">Ordena la rutina de ma√±ana</h2>
                    <p class="text-center text-slate-400 mb-6">Pon el n√∫mero 1 en lo primero que haces.</p>
                    <div class="flex flex-col md:flex-row gap-4 justify-center">
                        <div class="bg-white border-2 border-blue-200 p-6 rounded-2xl text-center flex-1">
                            <span class="text-5xl block mb-4">üõèÔ∏è</span>
                            <button onclick="checkOrder(1)" class="w-full py-2 bg-blue-500 text-white rounded-lg font-bold">Dormir</button>
                        </div>
                        <div class="bg-white border-2 border-yellow-200 p-6 rounded-2xl text-center flex-1">
                            <span class="text-5xl block mb-4">‚òÄÔ∏è</span>
                            <button onclick="checkOrder(0)" class="w-full py-2 bg-yellow-500 text-white rounded-lg font-bold">Despertar</button>
                        </div>
                    </div>
                `;
            }
        }

        // Drag and Drop Logic
        function allowDrop(ev) {
            ev.preventDefault();
            ev.target.classList.add('drag-over');
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.dataTransfer.setData("type", ev.target.getAttribute('data-type'));
        }

        function drop(ev, zoneType) {
            ev.preventDefault();
            ev.target.classList.remove('drag-over');
            const id = ev.dataTransfer.getData("text");
            const itemType = ev.dataTransfer.getData("type");

            if (itemType === zoneType) {
                const element = document.getElementById(id);
                element.style.opacity = "0.3";
                element.setAttribute('draggable', 'false');
                checkCompletion();
            }
        }

        // Action Handlers
        function checkEmotion(isCorrect) {
            if (isCorrect) showSuccess();
        }

        function checkOrder(val) {
            if (val === 0) showSuccess();
        }

        function checkCompletion() {
            // Check if all food items are moved (simplified logic for demo)
            showSuccess();
        }

        function showSuccess() {
            document.getElementById('success-modal').classList.remove('hidden');
            if (currentTokens < 5) {
                currentTokens++;
                document.getElementById('token-' + currentTokens).classList.add('active');
            }
        }

        function closeModal() {
            document.getElementById('success-modal').classList.add('hidden');
            loadActivity('sorting'); // Reset or load next
        }
    </script>
</body>
</html>
